{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://reputation.omatrust.org/schemas/userreview/attestation/1.3.0.json",
  "title": "User Review",
  "description": "A flat schema for structured 1â€“5 star reviews of tokenized applications or digital services. Designed for onchain attestation and offchain anchoring.",
  "type": "object",
  "keywords": [
    "review",
    "rating",
    "feedback",
    "UX",
    "app",
    "attestation",
    "reputation"
  ],
  "required": [
    "attester",
    "subject",
    "ratingValue"
  ],
  "properties": {
    "@context": {
      "type": "string",
      "description": "Optional JSON-LD context URI for semantic processing.",
      "default": "https://oma3.org/context.jsonld",
      "maxLength": 256,
      "x-oma3-skip-reason": "metadata"
    },
    "@type": {
      "type": "string",
      "description": "Semantic type identifier, typically 'UserReview'.",
      "default": "UserReview",
      "maxLength": 100,
      "x-oma3-skip-reason": "metadata"
    },
    "attester": {
      "type": "string",
      "title": "Attester ID",
      "description": "Ethereum address or DID of the entity submitting the review.",
      "maxLength": 128,
      "x-oma3-skip-reason": "eas"
    },
    "subject": {
      "type": "string",
      "title": "Review Subject",
      "format": "did",
      "pattern": "^did:[a-z0-9]+:.+$",
      "description": "DID of the thing being reviewed.",
      "maxLength": 256,
      "x-oma3-did-methods": ["web", "pkh", "key"]
    },
    "version": {
      "$ref": "common.schema.json#/$defs/Version",
      "title": "Subject Version",
      "description": "Version of the reviewed subject (e.g., app or API version)."
    },
    "ratingValue": {
      "type": "integer",
      "enum": [1, 2, 3, 4, 5],
      "title": "Rating",
      "description": "Numerical rating from 1 (worst) to 5 (best)."
    },
    "reviewBody": {
      "type": "string",
      "title": "Review",
      "description": "Free-form text describing your experience or feedback.",
      "maxLength": 500
    },
    "screenshotUrls": {
      "type": "array",
      "title": "Screenshots",
      "description": "Optional screenshots showing the app during review.",
      "items": {
        "type": "string",
        "format": "uri",
        "maxLength": 256
      },
      "maxItems": 10
    },
    "proofs": {
      "type": "array",
      "title": "Proofs",
      "description": "Array of cryptographic proofs demonstrating the reviewer used the service. Use proofPurpose='commercial-tx' for user review attestations.",
      "items": {
        "$ref": "common.schema.json#/$defs/Proof"
      },
      "minItems": 1
    },
    "issuedAt": {
      "type": "integer",
      "minimum": 0,
      "title": "Issued Date",
      "description": "Timestamp (in seconds) when the review was issued. EAS provides this via attestation timestamp.",
      "x-oma3-subtype": "timestamp",
      "x-oma3-skip-reason": "eas"
    }
  },
  "additionalProperties": false
}

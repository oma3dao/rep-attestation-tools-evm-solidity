{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://reputation.omatrust.org/schemas/endorsement/attestation/1.4.0.json",
  "title": "Endorsement",
  "description": "A lightweight attestation indicating support, trust, or approval for a DID-identified subject. The 'attestationType' field may be used to distinguish informal endorsements from formal approvals.",
  "type": "object",
  "keywords": [
    "endorsement",
    "approval",
    "reputation",
    "trust",
    "organization",
    "attestation"
  ],
  "required": [
    "attester",
    "subject"
  ],
  "properties": {
    "@context": {
      "type": "string",
      "description": "Optional JSON-LD context URI for semantic processing.",
      "default": "https://oma3.org/context.jsonld",
      "maxLength": 256,
      "x-oma3-skip-reason": "metadata"
    },
    "@type": {
      "type": "string",
      "description": "Semantic type identifier, typically 'Endorsement'.",
      "default": "Endorsement",
      "maxLength": 100,
      "x-oma3-skip-reason": "metadata"
    },
    "attester": {
      "type": "string",
      "title": "Attester ID",
      "format": "did",
      "pattern": "^did:[a-z0-9]+:.+$",
      "description": "DID of the entity issuing the endorsement or approval.",
      "maxLength": 256,
      "x-oma3-did-methods": ["web", "pkh", "key"],
      "x-oma3-skip-reason": "eas"
    },
    "subject": {
      "type": "string",
      "title": "Subject ID",
      "format": "did",
      "pattern": "^did:[a-z0-9]+:.+$",
      "description": "DID of the entity being endorsed or approved.",
      "maxLength": 256,
      "x-oma3-did-methods": ["web", "pkh", "key"]
    },
    "organization": {
      "type": "string",
      "title": "Organization",
      "format": "did",
      "pattern": "^did:[a-z0-9]+:.+$",
      "description": "DID of the parent organization. Use this when endorsing a service or resource that belongs to an organization (e.g., endorsing did:web:example.com:service:api, set organization to did:web:example.com). Leave empty when endorsing an organization directly.",
      "maxLength": 256,
      "x-oma3-did-methods": ["web", "pkh"]
    },
    "version": {
      "$ref": "common.schema.json#/$defs/Version",
      "title": "Software Version",
      "description": "Semantic version of the endorsed subject (e.g., '1.2.3'). Optional - leave empty if endorsing the subject generally rather than a specific version."
    },
    "policyURI": {
      "type": "string",
      "format": "uri",
      "title": "Policy URI",
      "description": "Optional URI pointing to the criteria or process used for formal approvals.",
      "maxLength": 256
    },
    "payload": {
      "type": "object",
      "title": "Endorsement Payload",
      "description": "Endorsement details. Evolvable without changing the envelope. When stored on-chain via EAS, this object is JSON-stringified.",
      "x-oma3-skip-reason": "unused",
      "additionalProperties": true
    },
    "payloadVersion": {
      "$ref": "common.schema.json#/$defs/PayloadVersion",
      "x-oma3-skip-reason": "unused"
    },
    "payloadSpecURI": {
      "$ref": "common.schema.json#/$defs/PayloadSpecURI",
      "x-oma3-skip-reason": "unused"
    },
    "payloadSpecDigest": {
      "$ref": "common.schema.json#/$defs/PayloadSpecDigest",
      "x-oma3-skip-reason": "unused"
    },
    "issuedAt": {
      "type": "integer",
      "minimum": 0,
      "title": "Issued Date",
      "description": "Unix timestamp (in seconds) when the attestation was issued. Default is the current time.",
      "x-oma3-subtype": "timestamp",
      "x-oma3-default": "current-timestamp"
    },
    "effectiveAt": {
      "type": "integer",
      "minimum": 0,
      "title": "Effective Date",
      "description": "Optional Unix timestamp (in seconds) when the assessment becomes effective. Default is the current time.",
      "x-oma3-subtype": "timestamp",
      "x-oma3-default": "current-timestamp"
    },
    "expiresAt": {
      "type": "integer",
      "minimum": 0,
      "title": "Expiration Date",
      "description": "Unix timestamp (in seconds) after which the assessment expires. Leave empty if the assessment does not expire.",
      "x-oma3-subtype": "timestamp"
    }
  },
  "additionalProperties": false
}